(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{522:function(e,t,o){"use strict";o.d(t,"a",(function(){return E}));o(126);var n=o(1),r=o(0),c=o(29),h=o(3),d=o(79),l=o(4),m=(o(26),o(35),o(223),o(128),o(2));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,n=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return Object(d.a)(this,o)}}var w={type:"change"},y={type:"start"},v={type:"end"},E=function(e){Object(h.a)(o,e);var t=f(o);function o(object,e){var n;Object(r.a)(this,o),n=t.call(this);var h=Object(c.a)(n),d=-1,l=0,f=1,E=2,x=3,j=4;n.object=object,n.domElement=e,n.domElement.style.touchAction="none",n.enabled=!0,n.screen={left:0,top:0,width:0,height:0},n.rotateSpeed=1,n.zoomSpeed=1.2,n.panSpeed=.3,n.noRotate=!1,n.noZoom=!1,n.noPan=!1,n.staticMoving=!1,n.dynamicDampingFactor=.2,n.minDistance=0,n.maxDistance=1/0,n.keys=["KeyA","KeyS","KeyD"],n.mouseButtons={LEFT:m.P.ROTATE,MIDDLE:m.P.DOLLY,RIGHT:m.P.PAN},n.target=new m.Rb;var D=1e-6,M=new m.Rb,P=1,X=d,L=d,T=0,k=0,Y=0,R=new m.Rb,I=new m.Qb,z=new m.Qb,C=new m.Rb,F=new m.Qb,O=new m.Qb,S=new m.Qb,_=new m.Qb,Q=[],A={};n.target0=n.target.clone(),n.position0=n.object.position.clone(),n.up0=n.object.up.clone(),n.zoom0=n.object.zoom,n.handleResize=function(){var e=h.domElement.getBoundingClientRect(),t=h.domElement.ownerDocument.documentElement;h.screen.left=e.left+window.pageXOffset-t.clientLeft,h.screen.top=e.top+window.pageYOffset-t.clientTop,h.screen.width=e.width,h.screen.height=e.height};var B,N,H,V,Z,U,W,$,K,G,J=(B=new m.Qb,function(e,t){return B.set((e-h.screen.left)/h.screen.width,(t-h.screen.top)/h.screen.height),B}),ee=function(){var e=new m.Qb;return function(t,o){return e.set((t-.5*h.screen.width-h.screen.left)/(.5*h.screen.width),(h.screen.height+2*(h.screen.top-o))/h.screen.width),e}}();function te(e){!1!==h.enabled&&(0===Q.length&&(h.domElement.setPointerCapture(e.pointerId),h.domElement.addEventListener("pointermove",oe),h.domElement.addEventListener("pointerup",ne)),function(e){Q.push(e)}(e),"touch"===e.pointerType?function(e){if(1===(he(e),Q.length))X=x,z.copy(ee(Q[0].pageX,Q[0].pageY)),I.copy(z);else{X=j;var t=Q[0].pageX-Q[1].pageX,o=Q[0].pageY-Q[1].pageY;k=T=Math.sqrt(t*t+o*o);var n=(Q[0].pageX+Q[1].pageX)/2,r=(Q[0].pageY+Q[1].pageY)/2;S.copy(J(n,r)),_.copy(S)}h.dispatchEvent(y)}(e):function(e){if(X===d)switch(e.button){case h.mouseButtons.LEFT:X=l;break;case h.mouseButtons.MIDDLE:X=f;break;case h.mouseButtons.RIGHT:X=E}var t=L!==d?L:X;t!==l||h.noRotate?t!==f||h.noZoom?t!==E||h.noPan||(S.copy(J(e.pageX,e.pageY)),_.copy(S)):(F.copy(J(e.pageX,e.pageY)),O.copy(F)):(z.copy(ee(e.pageX,e.pageY)),I.copy(z));h.dispatchEvent(y)}(e))}function oe(e){!1!==h.enabled&&("touch"===e.pointerType?function(e){if(1===(he(e),Q.length))I.copy(z),z.copy(ee(e.pageX,e.pageY));else{var t=function(e){var t=e.pointerId===Q[0].pointerId?Q[1]:Q[0];return A[t.pointerId]}(e),o=e.pageX-t.x,n=e.pageY-t.y;k=Math.sqrt(o*o+n*n);var r=(e.pageX+t.x)/2,c=(e.pageY+t.y)/2;_.copy(J(r,c))}}(e):function(e){var t=L!==d?L:X;t!==l||h.noRotate?t!==f||h.noZoom?t!==E||h.noPan||_.copy(J(e.pageX,e.pageY)):O.copy(J(e.pageX,e.pageY)):(I.copy(z),z.copy(ee(e.pageX,e.pageY)))}(e))}function ne(e){!1!==h.enabled&&("touch"===e.pointerType?function(e){switch(Q.length){case 0:X=d;break;case 1:X=x,z.copy(ee(e.pageX,e.pageY)),I.copy(z);break;case 2:X=j,z.copy(ee(e.pageX-I.x,e.pageY-I.y)),I.copy(z)}h.dispatchEvent(v)}(e):(X=d,h.dispatchEvent(v)),ue(e),0===Q.length&&(h.domElement.releasePointerCapture(e.pointerId),h.domElement.removeEventListener("pointermove",oe),h.domElement.removeEventListener("pointerup",ne)))}function ie(e){ue(e)}function re(e){!1!==h.enabled&&(window.removeEventListener("keydown",re),L===d&&(e.code!==h.keys[l]||h.noRotate?e.code!==h.keys[f]||h.noZoom?e.code!==h.keys[E]||h.noPan||(L=E):L=f:L=l))}function ae(){!1!==h.enabled&&(L=d,window.addEventListener("keydown",re))}function se(e){if(!1!==h.enabled&&!0!==h.noZoom){switch(e.preventDefault(),e.deltaMode){case 2:F.y-=.025*e.deltaY;break;case 1:F.y-=.01*e.deltaY;break;default:F.y-=25e-5*e.deltaY}h.dispatchEvent(y),h.dispatchEvent(v)}}function ce(e){!1!==h.enabled&&e.preventDefault()}function ue(e){delete A[e.pointerId];for(var i=0;i<Q.length;i++)if(Q[i].pointerId==e.pointerId)return void Q.splice(i,1)}function he(e){var t=A[e.pointerId];void 0===t&&(t=new m.Qb,A[e.pointerId]=t),t.set(e.pageX,e.pageY)}return n.rotateCamera=(N=new m.Rb,H=new m.mb,V=new m.Rb,Z=new m.Rb,U=new m.Rb,W=new m.Rb,function(){W.set(z.x-I.x,z.y-I.y,0);var e=W.length();e?(R.copy(h.object.position).sub(h.target),V.copy(R).normalize(),Z.copy(h.object.up).normalize(),U.crossVectors(Z,V).normalize(),Z.setLength(z.y-I.y),U.setLength(z.x-I.x),W.copy(Z.add(U)),N.crossVectors(W,R).normalize(),e*=h.rotateSpeed,H.setFromAxisAngle(N,e),R.applyQuaternion(H),h.object.up.applyQuaternion(H),C.copy(N),Y=e):!h.staticMoving&&Y&&(Y*=Math.sqrt(1-h.dynamicDampingFactor),R.copy(h.object.position).sub(h.target),H.setFromAxisAngle(C,Y),R.applyQuaternion(H),h.object.up.applyQuaternion(H)),I.copy(z)}),n.zoomCamera=function(){var e;X===j?(e=T/k,T=k,h.object.isPerspectiveCamera?R.multiplyScalar(e):h.object.isOrthographicCamera?(h.object.zoom/=e,h.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(1!==(e=1+(O.y-F.y)*h.zoomSpeed)&&e>0&&(h.object.isPerspectiveCamera?R.multiplyScalar(e):h.object.isOrthographicCamera?(h.object.zoom/=e,h.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),h.staticMoving?F.copy(O):F.y+=(O.y-F.y)*this.dynamicDampingFactor)},n.panCamera=($=new m.Qb,K=new m.Rb,G=new m.Rb,function(){if($.copy(_).sub(S),$.lengthSq()){if(h.object.isOrthographicCamera){var e=(h.object.right-h.object.left)/h.object.zoom/h.domElement.clientWidth,t=(h.object.top-h.object.bottom)/h.object.zoom/h.domElement.clientWidth;$.x*=e,$.y*=t}$.multiplyScalar(R.length()*h.panSpeed),G.copy(R).cross(h.object.up).setLength($.x),G.add(K.copy(h.object.up).setLength($.y)),h.object.position.add(G),h.target.add(G),h.staticMoving?S.copy(_):S.add($.subVectors(_,S).multiplyScalar(h.dynamicDampingFactor))}}),n.checkDistances=function(){h.noZoom&&h.noPan||(R.lengthSq()>h.maxDistance*h.maxDistance&&(h.object.position.addVectors(h.target,R.setLength(h.maxDistance)),F.copy(O)),R.lengthSq()<h.minDistance*h.minDistance&&(h.object.position.addVectors(h.target,R.setLength(h.minDistance)),F.copy(O)))},n.update=function(){R.subVectors(h.object.position,h.target),h.noRotate||h.rotateCamera(),h.noZoom||h.zoomCamera(),h.noPan||h.panCamera(),h.object.position.addVectors(h.target,R),h.object.isPerspectiveCamera?(h.checkDistances(),h.object.lookAt(h.target),M.distanceToSquared(h.object.position)>D&&(h.dispatchEvent(w),M.copy(h.object.position))):h.object.isOrthographicCamera?(h.object.lookAt(h.target),(M.distanceToSquared(h.object.position)>D||P!==h.object.zoom)&&(h.dispatchEvent(w),M.copy(h.object.position),P=h.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},n.reset=function(){X=d,L=d,h.target.copy(h.target0),h.object.position.copy(h.position0),h.object.up.copy(h.up0),h.object.zoom=h.zoom0,h.object.updateProjectionMatrix(),R.subVectors(h.object.position,h.target),h.object.lookAt(h.target),h.dispatchEvent(w),M.copy(h.object.position),P=h.object.zoom},n.dispose=function(){h.domElement.removeEventListener("contextmenu",ce),h.domElement.removeEventListener("pointerdown",te),h.domElement.removeEventListener("pointercancel",ie),h.domElement.removeEventListener("wheel",se),h.domElement.removeEventListener("pointermove",oe),h.domElement.removeEventListener("pointerup",ne),window.removeEventListener("keydown",re),window.removeEventListener("keyup",ae)},n.domElement.addEventListener("contextmenu",ce),n.domElement.addEventListener("pointerdown",te),n.domElement.addEventListener("pointercancel",ie),n.domElement.addEventListener("wheel",se,{passive:!1}),window.addEventListener("keydown",re),window.addEventListener("keyup",ae),n.handleResize(),n.update(),n}return Object(n.a)(o)}(m.t)},538:function(e,t,o){var content=o(589);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(53).default)("65d2edff",content,!0,{sourceMap:!1})},587:function(e,t,o){"use strict";var n=o(6),r=o(10),c=o(49),h=o(341),d=o(340),l=o(9),m=RangeError,f=String,w=Math.floor,y=r(d),v=r("".slice),E=r(1..toFixed),x=function(e,t,o){return 0===t?o:t%2==1?x(e,t-1,o*e):x(e*e,t/2,o)},j=function(data,e,t){for(var o=-1,n=t;++o<6;)n+=e*data[o],data[o]=n%1e7,n=w(n/1e7)},D=function(data,e){for(var t=6,o=0;--t>=0;)o+=data[t],data[t]=w(o/e),o=o%e*1e7},M=function(data){for(var e=6,s="";--e>=0;)if(""!==s||0===e||0!==data[e]){var t=f(data[e]);s=""===s?t:s+y("0",7-t.length)+t}return s};n({target:"Number",proto:!0,forced:l((function(){return"0.000"!==E(8e-5,3)||"1"!==E(.9,0)||"1.25"!==E(1.255,2)||"1000000000000000128"!==E(0xde0b6b3a7640080,0)}))||!l((function(){E({})}))},{toFixed:function(e){var t,o,n,r,d=h(this),l=c(e),data=[0,0,0,0,0,0],w="",E="0";if(l<0||l>20)throw m("Incorrect fraction digits");if(d!=d)return"NaN";if(d<=-1e21||d>=1e21)return f(d);if(d<0&&(w="-",d=-d),d>1e-21)if(o=(t=function(e){for(var t=0,o=e;o>=4096;)t+=12,o/=4096;for(;o>=2;)t+=1,o/=2;return t}(d*x(2,69,1))-69)<0?d*x(2,-t,1):d/x(2,t,1),o*=4503599627370496,(t=52-t)>0){for(j(data,0,o),n=l;n>=7;)j(data,1e7,0),n-=7;for(j(data,x(10,n,1),0),n=t-1;n>=23;)D(data,1<<23),n-=23;D(data,1<<n),j(data,1,1),D(data,2),E=M(data)}else j(data,0,o),j(data,1<<-t,0),E=M(data)+y("0",l);return E=l>0?w+((r=E.length)<=l?"0."+y("0",l-r)+E:v(E,0,r-l)+"."+v(E,r-l)):w+E}})},588:function(e,t,o){"use strict";o(538)},589:function(e,t,o){var n=o(52)(!1);n.push([e.i,".home-cloud-box{width:100%;height:280PX;position:relative;z-index:10;background:var(--75970f24);background-repeat:no-repeat;background-position:center center;background-size:110% auto}.home-cloud-box #webglDom_home{width:390PX;height:370PX;margin-top:-55PX;position:absolute;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%)}",""]),e.exports=n},636:function(e,t,o){"use strict";o.r(t);o(46),o(70),o(587),o(218);var n=o(2),r=o(522),c=o(214),h=o(188),d=o(523),l=o(517),m=o(8),f={name:"HomeCloud",data:function(){return{scene:null,camera:null,renderer:null,textloader:null,controls:null,width:0,height:0,mao:null,clock:null,group:null,morphTargetInfluences:null,morphTargetDictionary:null,onPointerDownPointerX:null,onPointerDownPointerY:null,startX:null,startY:null,endX:null,endY:null,outsideModel:!0,timer:null,direction:null,strength:0,back_ground:"url("+this.$store.state.sourcRoot+"/image/index/text-bg.png)"}},watch:{},mounted:function(){this.$nextTick(this.init)},methods:{init:function(){var e=this.$refs.webglDom_home;this.width=e.offsetWidth,this.height=e.offsetHeight,this.scene=new n.Cb,this.textloader=new n.Mb,this.camera=new n.db(this.width/-2,this.width/2,this.height/2,this.height/-2,1,1e3),this.camera.position.set(600,100,100),this.add(this.camera),this.camera.lookAt(this.scene.position),this.group=new n.x,this.clock=new n.k,this.renderer=new n.Tb({antialias:!0}),this.renderer.outputEncoding=n.Ub,this.renderer.toneMapping=n.a,this.renderer.toneMappingExposure=1,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=n.eb,this.renderer.setClearColor(new n.l("#ffffff"),.1),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.setSize(this.width,this.height),document.getElementById("webglDom_home").appendChild(this.renderer.domElement);var t=new c.a,o=new n.fb(this.renderer);this.scene.environment=o.fromScene(t).texture,document.getElementById("webglDom_home").addEventListener("mousedown",this.onDocumentMouseDown,!1),document.getElementById("webglDom_home").addEventListener("touchstart",this.onDocumentTouchDown,!1),document.getElementById("webglDom_home").addEventListener("touchmove",this.onDocumentTouchMove,!1),document.getElementById("webglDom_home").addEventListener("touchend",this.onDocumentTouchUp,!1);var h=new r.a(this.camera,this.renderer.domElement);h.noRotate=!0,h.noZoom=!0,h.noPan=!0,h.dynamicDampingFactor=.1,this.controls=h,this.loadModel(),this.render()},onDocumentTouchDown:function(e){this.startX=e.touches[0].pageX,this.startY=e.touches[0].pageY,this.onPointerDownPointerX=e.touches[0].pageX,this.onPointerDownPointerY=e.touches[0].pageY;var t=this.getIntersects(e);console.log("intersects",t),t&&t.length>0&&"身体"==t[0].object.name?this.outsideModel=!1:this.outsideModel=!0},getIntersects:function(e){e.preventDefault();var t=new n.zb,o=new n.Qb;return e.clientX?(o.x=e.clientX/window.innerWidth*2-1,o.y=-e.clientY/window.innerHeight*2+1):(o.x=this.onPointerDownPointerX/window.innerWidth*2-1,o.y=-this.onPointerDownPointerY/window.innerHeight*2+1),t.setFromCamera(o,this.camera),t.intersectObjects(this.mao.children,!0)},onDocumentTouchMove:function(e){this.onPointerDownPointerX=e.touches[0].pageX,this.onPointerDownPointerY=e.touches[0].pageY,this.endX=e.touches[0].pageX,this.endY=e.touches[0].pageY,this.mainLogic(this.startX,this.startY,this.endX,this.endY)},onDocumentTouchUp:function(e){var t=this,o=this.morphTargetInfluences,n=this.morphTargetDictionary[this.direction],r=this.strength;o[n]=r,this.morphTargetInfluences=o;var c=r/10;console.log("this.strength",this.strength),this.timer=setInterval((function(){r=(r=Number(r-c).toFixed(2))<0?r=0:r,console.log("strength",r),o[n]=r,t.morphTargetInfluences=o,0==r&&clearInterval(t.timer)}),10)},onDocumentMouseDown:function(e){},loadModel:function(){var e=this,t=(new d.a).setTranscoderPath("/js/libs/basis/").detectSupport(this.renderer),o=(new h.a).setCrossOrigin("anonymous").setKTX2Loader(t).setMeshoptDecoder(l.a),n=this.$store.state.sourcRoot+"/caseimg/home_1.glb";o.load(n,(function(t){e.mao=t.scene.children[0],e.mao.position.set(0,0,0),e.mao.scale.set(2.8,2.8,2.8),e.mao.rotation.set(0,1.4,0),e.group.add(e.mao),e.add(e.group);var head=e.mao.getObjectByName("身体");e.morphTargetInfluences=head.morphTargetInfluences,e.morphTargetDictionary=head.morphTargetDictionary}),(function(t){var o=Math.floor(t.loaded/t.total*100);e.$emit("getrate",o)}))},mainLogic:function(e,t,o,n){var r=this.width/2,c=this.height/2,h=e-r,d=t-c,l=o-r,m=n-c,f=h>l,w=h<l,y=d>m,v=d<m,E=r,x=Math.sqrt(Math.abs(e-o)*Math.abs(e-o)+Math.abs(t-n)*Math.abs(t-n)),j=Number(x/E).toFixed(2);Number(Math.abs(t-n)/E).toFixed(2),Number(Math.abs(e-o)/E).toFixed(2);console.log("strength",j),this.outsideModel?f&&y?this.extrusion(j,"youxia-li"):f&&v?this.extrusion(j,"youshang-li"):w&&y?this.extrusion(j,"zuoxia-li"):w&&v?this.extrusion(j,"zuoshang-li"):h==l?(j=Number(Math.abs(d-m)/E).toFixed(2),y&&this.extrusion(j,"xia-li"),v&&this.extrusion(j,"shang-li")):d==m&&(j=Number(Math.abs(h-l)/E).toFixed(2),f&&this.extrusion(j,"you-li"),w&&this.extrusion(j,"zuo-li")):this.outsideModel||(f&&y?this.extrusion(j,"zuoshang"):f&&v?this.extrusion(j,"zuoxia"):w&&y?this.extrusion(j,"youshang"):w&&v?this.extrusion(j,"youxia"):h==l?(j=Number(Math.abs(d-m)/E).toFixed(2),y&&this.extrusion(j,"shang"),v&&this.extrusion(j,"xia")):d==m&&(j=Number(Math.abs(h-l)/E).toFixed(2),f&&this.extrusion(j,"zuo"),w&&this.extrusion(j,"you")))},extrusion:function(e,t){e>1?e=1:e<0&&(e=0),console.log("strength",e);var o=this.morphTargetInfluences;o[this.morphTargetDictionary[t]]=e,this.morphTargetInfluences=o,this.direction=t,this.strength=e},addLight:function(){var e=new n.r(16777215,.2);e.position.set(0,1e3,1e3),e.castShadow=!0,this.add(e)},add:function(e){this.scene.add(e)},render:function(){this.controls.update(),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.render)}}},w=function(){Object(m.b)((function(e,t){return{"75970f24":e.back_ground}}))},y=f.setup;f.setup=y?function(e,t){return w(),y(e,t)}:w;var v=f,E=(o(588),o(30)),component=Object(E.a)(v,(function(){var e=this._self._c;return e("div",{staticClass:"home-cloud-box",attrs:{id:"home-cloud-box"}},[e("div",{ref:"webglDom_home",attrs:{id:"webglDom_home"}})])}),[],!1,null,null,null);t.default=component.exports}}]);