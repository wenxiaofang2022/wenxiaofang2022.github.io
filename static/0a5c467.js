(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{527:function(t,e,n){var content=n(592);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(53).default)("13e5d575",content,!0,{sourceMap:!1})},591:function(t,e,n){"use strict";n(527)},592:function(t,e,n){var o=n(52)(!1);o.push([t.i,".webglDom[data-v-2574c2a6]{width:100%;height:100%;position:relative;z-index:1}",""]),t.exports=o},643:function(t,e,n){"use strict";n.r(e);n(46),n(26),n(54);var o,r,h,l=n(2),c=n(229),d=n(189),w=n(188),m={name:"OilContent",props:["glburl"],data:function(){return{object:null,textloader:null,controls:null,group:null,width:0,height:0,center:null,activeIndex:0,onPointerDownPointerX:null,onPointerDownPointerY:null,logopath:{"云栖盲盒":"apsara.2020","伸爪":"vans","天猫live":"tmall.live","天猫国际全球好物课代表":"tmall.global","天生艺术":"utalent","淘宝回忆":"taobao.memory",ADIC:"ali.adic",HEY_DESIGN:"heydesign",OMOJI:"oppoo.moji","十大商品6":"taobaotop","发发奇":"farfetch","发发奇会员":"vipfarfetch","天猫主题店2":"tmall2","天猫主题店第一期":"tmall","宝藏新品牌":"tmallnew","超级视窗":"taobao.superwindow","飞猪2":"fliggy","麦当劳":"mcdonald.nft","东京奥运会":"tokyo2020","乐高":"lego","云栖大会2021":"ali.apsara","城市缝隙迷行贴纸":"city","观夏":"mixplace","造物节":"taobao2022","长江":"changjiang","不完全命理指南":"jinyu","节日不打烊2020":"nostop","节日不打烊2021":"nostop2021","菇得来福":"goodlife"}}},watch:{},mounted:function(){this.$nextTick(this.init)},methods:{init:function(){var t=this.$refs.webglDom;this.width=t.offsetWidth,this.height=t.offsetHeight,o=new l.Ab,this.textloader=new l.Kb,this.group=new l.v,(r=new l.eb(45,this.width/this.height,.01,1e4)).position.set(0,0,0),r.lookAt(0,0,0),o.add(r),this.loadModel(),t.addEventListener("mousedown",this.onDocumentMouseDown,!1),document.addEventListener("touchstart",this.onDocumentTouchDown,!1),document.addEventListener("touchend",this.onDocumentTouchUp,!1),document.addEventListener("touchmove",this.onDocumentTouchMove,!1)},onDocumentTouchDown:function(t){this.startX=t.touches[0].pageX,this.startY=t.touches[0].pageY,this.onPointerDownPointerX=t.touches[0].pageX,this.onPointerDownPointerY=t.touches[0].pageY},onDocumentTouchMove:function(t){this.onPointerDownPointerX=t.touches[0].pageX,this.onPointerDownPointerY=t.touches[0].pageY,this.endX=t.touches[0].pageX,this.endY=t.touches[0].pageY},onDocumentTouchUp:function(t){},onDocumentMouseDown:function(t){var e=this.getIntersects(t);if(console.log("intersects",e),0!==e.length&&"Mesh"===e[0].object.type){var n=e[0].object;console.log("selectObject",n.name);var path=this.logopath[n.name];if(!path)return;this.$router.push({path:"/caselist/"+path})}else console.log("未选中 Mesh!")},getIntersects:function(t,e){e||t.preventDefault();var n=new l.xb,o=new l.Ob;return e?t.clientX?(o.x=t.clientX/window.innerWidth*2-1,o.y=-t.clientY/window.innerHeight*2+1):(o.x=this.onPointerDownPointerX/window.innerWidth*2-1,o.y=-this.onPointerDownPointerY/window.innerHeight*2+1):(o.x=t.clientX/window.innerWidth*2-1,o.y=-t.clientY/window.innerHeight*2+1),n.setFromCamera(o,r),n.intersectObjects(this.group.children,!0)},changeCamera:function(t){var object=t.scene||t.scenes[0],e=(new l.f).setFromObject(object),n=e.getSize(new l.Pb(0,0,0)).length(),w=e.getCenter(new l.Pb(0,0,0));object.position.x+=object.position.x-w.x,object.position.y+=object.position.y-w.y,object.position.z+=object.position.z-w.z,object.scale.set(.96,.96,.96),object.translateY(.1),r.near=n/100,r.far=100*n,r.position.copy(w),r.position.x+=n/2,r.position.y+=n/5,r.position.z+=n/2,r.lookAt(w),r.up=new l.Pb(0,1,0),r.updateProjectionMatrix(),this.object=object,this.group.add(this.object),o.add(this.group),this.printGraph(object),(h=new l.Rb({antialias:!0})).outputEncoding=l.Sb,h.toneMapping=l.a,h.toneMappingExposure=1.2,h.shadowMap.enabled=!0,h.shadowMap.type=l.cb,h.setClearColor(new l.l("#000000"),0),h.setPixelRatio(Math.min(window.devicePixelRatio,2)),h.setSize(this.width,this.height),this.$refs.webglDom.appendChild(h.domElement);var m=new d.a,f=new l.db(h);o.environment=f.fromScene(m).texture;var v=new c.a(r,h.domElement);v.enablePan=!1,v.enableZoom=!1,v.minPolarAngle=Math.PI/3,v.maxPolarAngle=Math.PI/2,this.controls=v,this.render()},loadModel:function(){var t=this;(new w.a).load(this.glburl,(function(e){console.log("gltf",e),t.changeCamera(e)}),(function(e){var n=Math.floor(e.loaded/e.total*100);t.$emit("judgerate",n)}))},printGraph:function(t){var e=this;console.log("node.children.length",t.children.length),console.group(" <"+t.type+"> "+t.name),t.children.forEach((function(t){return e.printGraph(t)})),console.groupEnd()},addLight:function(){var t=1e3,e=new l.b(16777215,.5);this.add(e);var n=new l.p(16777215,.5);n.position.set(0,t,t),this.add(n);var o=new l.p(16777215,.5);o.position.set(-1e3,t,t),this.add(o);var r=new l.p(16777215,.5);r.position.set(t,t,t),this.add(r);var h=new l.p(16777215,.5);h.position.set(0,t,-1e3),this.add(h);var c=new l.p(16777215,.5);c.position.set(0,-1e3,-1e3),this.add(c)},add:function(t){o.add(t)},render:function(){h.render(o,r),requestAnimationFrame(this.render)}}},f=(n(591),n(30)),component=Object(f.a)(m,(function(){return(0,this._self._c)("div",{ref:"webglDom",staticClass:"webglDom"})}),[],!1,null,"2574c2a6",null);e.default=component.exports}}]);