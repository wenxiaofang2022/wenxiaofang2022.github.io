(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{340:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));n(347);var o=n(146),r=n(145),c=n(351),l=n(348),h=n(349),d=n(345),m=(n(14),n(24),n(396),n(207),n(337));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(d.a)(e);if(t){var r=Object(d.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(h.a)(this,n)}}var w={type:"change"},v={type:"start"},E={type:"end"},y=function(e){Object(l.a)(n,e);var t=f(n);function n(object,e){var o,l,h,d,f,y,P;Object(r.a)(this,n),(o=t.call(this)).object=object,o.domElement=e,o.domElement.style.touchAction="none",o.enabled=!0,o.target=new m.Nb,o.minDistance=0,o.maxDistance=1/0,o.minZoom=0,o.maxZoom=1/0,o.minPolarAngle=0,o.maxPolarAngle=Math.PI,o.minAzimuthAngle=-1/0,o.maxAzimuthAngle=1/0,o.enableDamping=!1,o.dampingFactor=.05,o.enableZoom=!0,o.zoomSpeed=1,o.enableRotate=!0,o.rotateSpeed=1,o.enablePan=!0,o.panSpeed=1,o.screenSpacePanning=!0,o.keyPanSpeed=7,o.autoRotate=!1,o.autoRotateSpeed=2,o.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},o.mouseButtons={LEFT:m.N.ROTATE,MIDDLE:m.N.DOLLY,RIGHT:m.N.PAN},o.touches={ONE:m.Fb.ROTATE,TWO:m.Fb.DOLLY_PAN},o.target0=o.target.clone(),o.position0=o.object.position.clone(),o.zoom0=o.object.zoom,o._domElementKeyEvents=null,o.getPolarAngle=function(){return N.phi},o.getAzimuthalAngle=function(){return N.theta},o.getDistance=function(){return this.object.position.distanceTo(this.target)},o.listenToKeyEvents=function(e){e.addEventListener("keydown",pe),this._domElementKeyEvents=e},o.saveState=function(){O.target0.copy(O.target),O.position0.copy(O.object.position),O.zoom0=O.object.zoom},o.reset=function(){O.target.copy(O.target0),O.object.position.copy(O.position0),O.object.zoom=O.zoom0,O.object.updateProjectionMatrix(),O.dispatchEvent(w),O.update(),j=M.NONE},o.update=(l=new m.Nb,h=(new m.jb).setFromUnitVectors(object.up,new m.Nb(0,1,0)),d=h.clone().invert(),f=new m.Nb,y=new m.jb,P=2*Math.PI,function(){var e=O.object.position;l.copy(e).sub(O.target),l.applyQuaternion(h),N.setFromVector3(l),O.autoRotate&&j===M.NONE&&U(2*Math.PI/60/60*O.autoRotateSpeed),O.enableDamping?(N.theta+=D.theta*O.dampingFactor,N.phi+=D.phi*O.dampingFactor):(N.theta+=D.theta,N.phi+=D.phi);var t=O.minAzimuthAngle,n=O.maxAzimuthAngle;return isFinite(t)&&isFinite(n)&&(t<-Math.PI?t+=P:t>Math.PI&&(t-=P),n<-Math.PI?n+=P:n>Math.PI&&(n-=P),N.theta=t<=n?Math.max(t,Math.min(n,N.theta)):N.theta>(t+n)/2?Math.max(t,N.theta):Math.min(n,N.theta)),N.phi=Math.max(O.minPolarAngle,Math.min(O.maxPolarAngle,N.phi)),N.makeSafe(),N.radius*=A,N.radius=Math.max(O.minDistance,Math.min(O.maxDistance,N.radius)),!0===O.enableDamping?O.target.addScaledVector(x,O.dampingFactor):O.target.add(x),l.setFromSpherical(N),l.applyQuaternion(d),e.copy(O.target).add(l),O.object.lookAt(O.target),!0===O.enableDamping?(D.theta*=1-O.dampingFactor,D.phi*=1-O.dampingFactor,x.multiplyScalar(1-O.dampingFactor)):(D.set(0,0,0),x.set(0,0,0)),A=1,!!(L||f.distanceToSquared(O.object.position)>T||8*(1-y.dot(O.object.quaternion))>T)&&(O.dispatchEvent(w),f.copy(O.object.position),y.copy(O.object.quaternion),L=!1,!0)}),o.dispose=function(){O.domElement.removeEventListener("contextmenu",de),O.domElement.removeEventListener("pointerdown",ce),O.domElement.removeEventListener("pointercancel",ue),O.domElement.removeEventListener("wheel",he),O.domElement.removeEventListener("pointermove",se),O.domElement.removeEventListener("pointerup",le),null!==O._domElementKeyEvents&&O._domElementKeyEvents.removeEventListener("keydown",pe)};var O=Object(c.a)(o),M={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},j=M.NONE,T=1e-6,N=new m.Db,D=new m.Db,A=1,x=new m.Nb,L=!1,Y=new m.Mb,k=new m.Mb,R=new m.Mb,I=new m.Mb,C=new m.Mb,S=new m.Mb,X=new m.Mb,z=new m.Mb,_=new m.Mb,F=[],H={};function Z(){return Math.pow(.95,O.zoomSpeed)}function U(e){D.theta-=e}function G(e){D.phi-=e}var K,W=(K=new m.Nb,function(e,t){K.setFromMatrixColumn(t,0),K.multiplyScalar(-e),x.add(K)}),V=function(){var e=new m.Nb;return function(t,n){!0===O.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(O.object.up,e)),e.multiplyScalar(t),x.add(e)}}(),B=function(){var e=new m.Nb;return function(t,n){var element=O.domElement;if(O.object.isPerspectiveCamera){var o=O.object.position;e.copy(o).sub(O.target);var r=e.length();r*=Math.tan(O.object.fov/2*Math.PI/180),W(2*t*r/element.clientHeight,O.object.matrix),V(2*n*r/element.clientHeight,O.object.matrix)}else O.object.isOrthographicCamera?(W(t*(O.object.right-O.object.left)/O.object.zoom/element.clientWidth,O.object.matrix),V(n*(O.object.top-O.object.bottom)/O.object.zoom/element.clientHeight,O.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),O.enablePan=!1)}}();function $(e){O.object.isPerspectiveCamera?A/=e:O.object.isOrthographicCamera?(O.object.zoom=Math.max(O.minZoom,Math.min(O.maxZoom,O.object.zoom*e)),O.object.updateProjectionMatrix(),L=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),O.enableZoom=!1)}function J(e){O.object.isPerspectiveCamera?A*=e:O.object.isOrthographicCamera?(O.object.zoom=Math.max(O.minZoom,Math.min(O.maxZoom,O.object.zoom/e)),O.object.updateProjectionMatrix(),L=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),O.enableZoom=!1)}function Q(e){Y.set(e.clientX,e.clientY)}function ee(e){I.set(e.clientX,e.clientY)}function te(){if(1===F.length)Y.set(F[0].pageX,F[0].pageY);else{var e=.5*(F[0].pageX+F[1].pageX),t=.5*(F[0].pageY+F[1].pageY);Y.set(e,t)}}function ne(){if(1===F.length)I.set(F[0].pageX,F[0].pageY);else{var e=.5*(F[0].pageX+F[1].pageX),t=.5*(F[0].pageY+F[1].pageY);I.set(e,t)}}function oe(){var e=F[0].pageX-F[1].pageX,t=F[0].pageY-F[1].pageY,n=Math.sqrt(e*e+t*t);X.set(0,n)}function ae(e){if(1==F.length)k.set(e.pageX,e.pageY);else{var t=fe(e),n=.5*(e.pageX+t.x),o=.5*(e.pageY+t.y);k.set(n,o)}R.subVectors(k,Y).multiplyScalar(O.rotateSpeed);var element=O.domElement;U(2*Math.PI*R.x/element.clientHeight),G(2*Math.PI*R.y/element.clientHeight),Y.copy(k)}function ie(e){if(1===F.length)C.set(e.pageX,e.pageY);else{var t=fe(e),n=.5*(e.pageX+t.x),o=.5*(e.pageY+t.y);C.set(n,o)}S.subVectors(C,I).multiplyScalar(O.panSpeed),B(S.x,S.y),I.copy(C)}function re(e){var t=fe(e),n=e.pageX-t.x,o=e.pageY-t.y,r=Math.sqrt(n*n+o*o);z.set(0,r),_.set(0,Math.pow(z.y/X.y,O.zoomSpeed)),$(_.y),X.copy(z)}function ce(e){!1!==O.enabled&&(0===F.length&&(O.domElement.setPointerCapture(e.pointerId),O.domElement.addEventListener("pointermove",se),O.domElement.addEventListener("pointerup",le)),function(e){F.push(e)}(e),"touch"===e.pointerType?function(e){switch(be(e),F.length){case 1:switch(O.touches.ONE){case m.Fb.ROTATE:if(!1===O.enableRotate)return;te(),j=M.TOUCH_ROTATE;break;case m.Fb.PAN:if(!1===O.enablePan)return;ne(),j=M.TOUCH_PAN;break;default:j=M.NONE}break;case 2:switch(O.touches.TWO){case m.Fb.DOLLY_PAN:if(!1===O.enableZoom&&!1===O.enablePan)return;O.enableZoom&&oe(),O.enablePan&&ne(),j=M.TOUCH_DOLLY_PAN;break;case m.Fb.DOLLY_ROTATE:if(!1===O.enableZoom&&!1===O.enableRotate)return;O.enableZoom&&oe(),O.enableRotate&&te(),j=M.TOUCH_DOLLY_ROTATE;break;default:j=M.NONE}break;default:j=M.NONE}j!==M.NONE&&O.dispatchEvent(v)}(e):function(e){var t;switch(e.button){case 0:t=O.mouseButtons.LEFT;break;case 1:t=O.mouseButtons.MIDDLE;break;case 2:t=O.mouseButtons.RIGHT;break;default:t=-1}switch(t){case m.N.DOLLY:if(!1===O.enableZoom)return;!function(e){X.set(e.clientX,e.clientY)}(e),j=M.DOLLY;break;case m.N.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===O.enablePan)return;ee(e),j=M.PAN}else{if(!1===O.enableRotate)return;Q(e),j=M.ROTATE}break;case m.N.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===O.enableRotate)return;Q(e),j=M.ROTATE}else{if(!1===O.enablePan)return;ee(e),j=M.PAN}break;default:j=M.NONE}j!==M.NONE&&O.dispatchEvent(v)}(e))}function se(e){!1!==O.enabled&&("touch"===e.pointerType?function(e){switch(be(e),j){case M.TOUCH_ROTATE:if(!1===O.enableRotate)return;ae(e),O.update();break;case M.TOUCH_PAN:if(!1===O.enablePan)return;ie(e),O.update();break;case M.TOUCH_DOLLY_PAN:if(!1===O.enableZoom&&!1===O.enablePan)return;!function(e){O.enableZoom&&re(e),O.enablePan&&ie(e)}(e),O.update();break;case M.TOUCH_DOLLY_ROTATE:if(!1===O.enableZoom&&!1===O.enableRotate)return;!function(e){O.enableZoom&&re(e),O.enableRotate&&ae(e)}(e),O.update();break;default:j=M.NONE}}(e):function(e){switch(j){case M.ROTATE:if(!1===O.enableRotate)return;!function(e){k.set(e.clientX,e.clientY),R.subVectors(k,Y).multiplyScalar(O.rotateSpeed);var element=O.domElement;U(2*Math.PI*R.x/element.clientHeight),G(2*Math.PI*R.y/element.clientHeight),Y.copy(k),O.update()}(e);break;case M.DOLLY:if(!1===O.enableZoom)return;!function(e){z.set(e.clientX,e.clientY),_.subVectors(z,X),_.y>0?$(Z()):_.y<0&&J(Z()),X.copy(z),O.update()}(e);break;case M.PAN:if(!1===O.enablePan)return;!function(e){C.set(e.clientX,e.clientY),S.subVectors(C,I).multiplyScalar(O.panSpeed),B(S.x,S.y),I.copy(C),O.update()}(e)}}(e))}function le(e){me(e),0===F.length&&(O.domElement.releasePointerCapture(e.pointerId),O.domElement.removeEventListener("pointermove",se),O.domElement.removeEventListener("pointerup",le)),O.dispatchEvent(E),j=M.NONE}function ue(e){me(e)}function he(e){!1!==O.enabled&&!1!==O.enableZoom&&j===M.NONE&&(e.preventDefault(),O.dispatchEvent(v),function(e){e.deltaY<0?J(Z()):e.deltaY>0&&$(Z()),O.update()}(e),O.dispatchEvent(E))}function pe(e){!1!==O.enabled&&!1!==O.enablePan&&function(e){var t=!1;switch(e.code){case O.keys.UP:B(0,O.keyPanSpeed),t=!0;break;case O.keys.BOTTOM:B(0,-O.keyPanSpeed),t=!0;break;case O.keys.LEFT:B(O.keyPanSpeed,0),t=!0;break;case O.keys.RIGHT:B(-O.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),O.update())}(e)}function de(e){!1!==O.enabled&&e.preventDefault()}function me(e){delete H[e.pointerId];for(var i=0;i<F.length;i++)if(F[i].pointerId==e.pointerId)return void F.splice(i,1)}function be(e){var t=H[e.pointerId];void 0===t&&(t=new m.Mb,H[e.pointerId]=t),t.set(e.pageX,e.pageY)}function fe(e){var t=e.pointerId===F[0].pointerId?F[1]:F[0];return H[t.pointerId]}return O.domElement.addEventListener("contextmenu",de),O.domElement.addEventListener("pointerdown",ce),O.domElement.addEventListener("pointercancel",ue),O.domElement.addEventListener("wheel",he,{passive:!1}),o.update(),o}return Object(o.a)(n)}(m.r)},475:function(e,t,n){var content=n(576);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(67).default)("3bc96b0e",content,!0,{sourceMap:!1})},519:function(e,t,n){"use strict";n.r(t);n(30),n(14),n(38);var o=n(337),r=n(340),c=n(338),l=n(339),h={name:"OilContent",props:["glburl"],data:function(){return{object:null,scene:null,camera:null,renderer:null,textloader:null,controls:null,group:null,width:0,height:0,center:null,activeIndex:0,onPointerDownPointerX:null,onPointerDownPointerY:null,logopath:{"云栖盲盒":"apsara.2020","伸爪":"vans","天猫live":"tmall.live","天猫国际全球好物课代表":"tmall.global","天生艺术":"utalent","淘宝回忆":"taobao.memory",ADIC:"ali.adic",HEY_DESIGN:"heydesign",OMOJI:"oppoo.moji","十大商品6":"taobaotop","发发奇":"farfetch","发发奇会员":"vipfarfetch","天猫主题店2":"tmall2","天猫主题店第一期":"tmall","宝藏新品牌":"tmallnew","超级视窗":"taobao.superwindow","飞猪2":"fliggy","麦当劳":"mcdonald.nft","东京奥运会":"tokyo2020","乐高":"lego","云栖大会2021":"ali.apsara","城市缝隙迷行贴纸":"city","观夏":"mixplace","造物节":"taobao2022","长江":"changjiang","不完全命理指南":"jinyu","节日不打烊2020":"nostop","节日不打烊2021":"nostop2021","菇得来福":"goodlife"}}},watch:{},mounted:function(){this.$nextTick(this.init)},methods:{init:function(){var e=this.$refs.webglDom;this.width=e.offsetWidth,this.height=e.offsetHeight,this.scene=new o.zb,this.textloader=new o.Ib,this.group=new o.v,this.camera=new o.eb(45,this.width/this.height,.01,1e4),this.camera.position.set(0,0,0),console.log("this.camera",this.camera),this.camera.lookAt(0,0,0),this.scene.add(this.camera),this.loadModel(),e.addEventListener("mousedown",this.onDocumentMouseDown,!1),document.addEventListener("touchstart",this.onDocumentTouchDown,!1),document.addEventListener("touchend",this.onDocumentTouchUp,!1),document.addEventListener("touchmove",this.onDocumentTouchMove,!1)},onDocumentTouchDown:function(e){this.startX=e.touches[0].pageX,this.startY=e.touches[0].pageY,this.onPointerDownPointerX=e.touches[0].pageX,this.onPointerDownPointerY=e.touches[0].pageY},onDocumentTouchMove:function(e){this.onPointerDownPointerX=e.touches[0].pageX,this.onPointerDownPointerY=e.touches[0].pageY,this.endX=e.touches[0].pageX,this.endY=e.touches[0].pageY},onDocumentTouchUp:function(e){},onDocumentMouseDown:function(e){var t=this.getIntersects(e);if(console.log("intersects",t),0!==t.length&&"Mesh"===t[0].object.type){var n=t[0].object;console.log("selectObject",n.name);var path=this.logopath[n.name];if(!path)return;this.$router.push({path:"/caselist/"+path})}else console.log("未选中 Mesh!")},getIntersects:function(e,t){t||e.preventDefault();var n=new o.wb,r=new o.Mb;return t?e.clientX?(r.x=e.clientX/window.innerWidth*2-1,r.y=-e.clientY/window.innerHeight*2+1):(r.x=this.onPointerDownPointerX/window.innerWidth*2-1,r.y=-this.onPointerDownPointerY/window.innerHeight*2+1):(r.x=e.clientX/window.innerWidth*2-1,r.y=-e.clientY/window.innerHeight*2+1),n.setFromCamera(r,this.camera),n.intersectObjects(this.group.children,!0)},changeCamera:function(e){var object=e.scene||e.scenes[0],t=(new o.f).setFromObject(object),n=t.getSize(new o.Nb(0,0,0)).length(),l=t.getCenter(new o.Nb(0,0,0));object.position.x+=object.position.x-l.x,object.position.y+=object.position.y-l.y,object.position.z+=object.position.z-l.z,object.scale.set(.96,.96,.96),object.translateY(.1),this.camera.near=n/100,this.camera.far=100*n,this.camera.position.copy(l),this.camera.position.x+=n/2,this.camera.position.y+=n/5,this.camera.position.z+=n/2,this.camera.lookAt(l),this.camera.up=new o.Nb(0,1,0),this.camera.updateProjectionMatrix(),this.object=object,this.group.add(this.object),this.scene.add(this.group),this.printGraph(object),this.renderer=new o.Pb({antialias:!0}),this.renderer.outputEncoding=o.Qb,this.renderer.toneMapping=o.a,this.renderer.toneMappingExposure=1,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=o.cb,this.renderer.setClearColor(new o.l("#000000"),0),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.setSize(this.width,this.height),this.$refs.webglDom.appendChild(this.renderer.domElement);var h=new c.a,d=new o.db(this.renderer);this.scene.environment=d.fromScene(h).texture;var m=new r.a(this.camera,this.renderer.domElement);m.enablePan=!1,m.enableZoom=!1,m.minPolarAngle=Math.PI/3,m.maxPolarAngle=Math.PI/2,this.controls=m,this.render()},loadModel:function(){var e=this;(new l.a).load(this.glburl,(function(t){console.log("gltf",t),e.changeCamera(t)}))},printGraph:function(e){var t=this;console.log("node.children.length",e.children.length),console.group(" <"+e.type+"> "+e.name),e.children.forEach((function(e){return t.printGraph(e)})),console.groupEnd()},addLight:function(){var e=1e3,t=new o.b(16777215,.5);this.add(t);var n=new o.p(16777215,.5);n.position.set(0,e,e),this.add(n);var r=new o.p(16777215,.5);r.position.set(-1e3,e,e),this.add(r);var c=new o.p(16777215,.5);c.position.set(e,e,e),this.add(c);var l=new o.p(16777215,.5);l.position.set(0,e,-1e3),this.add(l);var h=new o.p(16777215,.5);h.position.set(0,-1e3,-1e3),this.add(h)},add:function(e){this.scene.add(e)},render:function(){this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.render)}}},d=(n(575),n(34)),component=Object(d.a)(h,(function(){return(0,this._self._c)("div",{ref:"webglDom",staticClass:"webglDom"})}),[],!1,null,"95cbf7e6",null);t.default=component.exports},575:function(e,t,n){"use strict";n(475)},576:function(e,t,n){var o=n(66)(!1);o.push([e.i,".webglDom[data-v-95cbf7e6]{width:100%;height:100%;position:relative;z-index:1}",""]),e.exports=o}}]);