(window.webpackJsonp=window.webpackJsonp||[]).push([[4,21,22,23],{497:function(e,t,r){"use strict";r.r(t);t.default="\n\nuniform sampler2D uMap;\n\nvarying vec2 vUv;\nvarying float vDiff;\n\nvoid main() {\n\tgl_FragColor = texture2D(uMap, vUv);\n}"},498:function(e,t,r){"use strict";r.r(t);t.default="\n\nuniform float uTime;\nuniform vec3 uDragStart;\nuniform vec3 uDragTarget;\nuniform float uReleaseDecay;\nuniform float uReleaseFrequency;\nuniform float uDragReleaseTime;\nuniform float uDragRelease;\n\nvarying vec2 vUv;\nvarying float vDiff;\n\n\nvoid main() {\n    float startToTarget = distance(uDragTarget, uDragStart);\n    float distanceToStart = distance(position, uDragStart);\n    float influence = distanceToStart / (0.2 + 0.4 * startToTarget);\n    float distortion = exp(pow(clamp(influence, 0.,1.), 3.2) * -6.);\n\n    if (uDragRelease > 0.) {\n        float timeSinceRelease = uTime - uDragReleaseTime;\n        distortion *= exp(-uReleaseDecay * timeSinceRelease * max(distortion, 1.) / ( 6.));\n        distortion *= cos(timeSinceRelease * uReleaseFrequency / ( 6.28));\n    }\n\n    vec3 stretch = (uDragTarget - uDragStart) * distortion;\n    stretch += (uDragStart - position) * distortion * 0.72;\n\n    vec3 pos = position;\n    pos += stretch;\n    pos.z += abs(distortion) * 0.2;\n\n    vec4 viewPosition = modelViewMatrix * vec4(pos, 1.);\n\n    gl_Position = projectionMatrix * viewPosition;\n\n    vUv = uv;\n    vDiff = length(pos - position) * uDragRelease;\n}"},506:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return m}));var n=r(0),o=r(1),l=r(2),c=r(188),h=r(497),d=r(498),m=function(){function e(){Object(n.a)(this,e),this.gltfLoader=new c.a,this.textureLoader=new l.Mb,this.backgroundColor="linear-gradient(0deg, rgb(68 99 49) 0%, rgb(163 174 255) 100%)",this.setMaterial(),this.setShape()}return Object(o.a)(e,[{key:"setMaterial",value:function(){var e=this.$store.state.sourcRoot+"/caseimg/snorlax_texture.png",map=this.textureLoader.load(e);map.flipY=!1,this.material=new l.Db({vertexShader:d.default,fragmentShader:h.default,uniforms:{uTime:{value:0},uDragStart:{value:new l.Rb},uDragTarget:{value:new l.Rb},uDragReleaseTime:{value:0},uDragRelease:{value:1},uReleaseDecay:{value:10},uReleaseFrequency:{value:55},uMap:{value:map}},transparent:!0})}},{key:"setShape",value:function(){var e=this;this.gltfLoader.load("assets/snorlax_210.glb",(function(t){console.log("gltf",t),e.shape=t.scene.children[0],e.shape.material=e.material}))}},{key:"onMouseDown",value:function(e){this.material.uniforms.uDragStart.value.copy(e),this.material.uniforms.uDragTarget.value.copy(e),this.material.uniforms.uDragRelease.value=!1}},{key:"onMouseMove",value:function(e){this.material.uniforms.uDragTarget.value.copy(e)}},{key:"onMouseUp",value:function(time){this.material.uniforms.uDragReleaseTime.value=time,this.material.uniforms.uDragRelease.value=!0}},{key:"update",value:function(time){this.material.uniforms.uTime.value=time}},{key:"setConfig",value:function(e){e.addInput(this.material.uniforms.uReleaseDecay,"value",{min:.5,max:30,label:"releaseDecay"}),e.addInput(this.material.uniforms.uReleaseFrequency,"value",{min:1,max:100,label:"releaseFrequency"})}}]),e}()},536:function(e,t,r){var content=r(584);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(53).default)("3be35ae2",content,!0,{sourceMap:!1})},583:function(e,t,r){"use strict";r(536)},584:function(e,t,r){var n=r(52)(!1);n.push([e.i,".home-cloud-box{width:100%;height:280PX;position:relative;z-index:10;background:var(--55c83c20);background-repeat:no-repeat;background-position:center center;background-size:110% auto}.home-cloud-box #webglDom_home{height:1000PX;margin-top:-356PX;position:fixed;z-index:1000;z-index:10;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%)}",""]),e.exports=n},594:function(e,t,r){"use strict";r.r(t);var n=r(2),o=r(188),l=r(523),c=r(517),h=(r(126),r(0)),d=r(1),m=r(5),f=r(3),v=r(79),w=r(4);r(189),r(26),r(217),r(190),r(191),r(192),r(193),r(194),r(195),r(196),r(197),r(198),r(199),r(200),r(201),r(202),r(203),r(204),r(205),r(206),r(207),r(208),r(209),r(210),r(211),r(212),r(48),r(42),r(153),r(213),r(216);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(w.a)(e);if(t){var o=Object(w.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var D=function(e){Object(f.a)(r,e);var t=y(r);function r(e){var o;return Object(h.a)(this,r),(o=t.call(this,e)).type=n.y,o}return Object(d.a)(r,[{key:"parse",value:function(e){var t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:console.error("THREE.RGBELoader: Error: "+(t||""))}return-1},r=function(e,t,r){t=t||1024;for(var p=e.pos,i=-1,n=0,s="",o=String.fromCharCode.apply(null,new Uint16Array(e.subarray(p,p+128)));0>(i=o.indexOf("\n"))&&n<t&&p<e.byteLength;)s+=o,n+=o.length,p+=128,o+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(p,p+128)));return-1<i&&(!1!==r&&(e.pos+=n+i+1),s+o.slice(0,i))},o=function(e,t,r,o){var l=e[t+3],c=Math.pow(2,l-128)/255;r[o+0]=n.q.toHalfFloat(Math.min(e[t+0]*c,65504)),r[o+1]=n.q.toHalfFloat(Math.min(e[t+1]*c,65504)),r[o+2]=n.q.toHalfFloat(Math.min(e[t+2]*c,65504)),r[o+3]=n.q.toHalfFloat(1)},l=new Uint8Array(e);l.pos=0;var c,h,d,m,f,v,w=function(e){var line,n,o=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,l=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,c=/^\s*FORMAT=(\S+)\s*$/,h=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,header={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(line=r(e)))return t(1,"no header found");if(!(n=line.match(/^#\?(\S+)/)))return t(3,"bad initial token");for(header.valid|=1,header.programtype=n[1],header.string+=line+"\n";!1!==(line=r(e));)if(header.string+=line+"\n","#"!==line.charAt(0)){if((n=line.match(o))&&(header.gamma=parseFloat(n[1])),(n=line.match(l))&&(header.exposure=parseFloat(n[1])),(n=line.match(c))&&(header.valid|=2,header.format=n[1]),(n=line.match(h))&&(header.valid|=4,header.height=parseInt(n[1],10),header.width=parseInt(n[2],10)),2&header.valid&&4&header.valid)break}else header.comments+=line+"\n";return 2&header.valid?4&header.valid?header:t(3,"missing image size specifier"):t(3,"missing format specifier")}(l);if(-1!==w){var y=w.width,D=w.height,R=function(e,r,n){var o=r;if(o<8||o>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(o!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");var l=new Uint8Array(4*r*n);if(!l.length)return t(4,"unable to allocate buffer space");for(var c=0,h=0,d=4*o,m=new Uint8Array(4),f=new Uint8Array(d),v=n;v>0&&h<e.byteLength;){if(h+4>e.byteLength)return t(1);if(m[0]=e[h++],m[1]=e[h++],m[2]=e[h++],m[3]=e[h++],2!=m[0]||2!=m[1]||(m[2]<<8|m[3])!=o)return t(3,"bad rgbe scanline format");for(var w=0,y=void 0;w<d&&h<e.byteLength;){var D=(y=e[h++])>128;if(D&&(y-=128),0===y||w+y>d)return t(3,"bad scanline data");if(D)for(var R=e[h++],i=0;i<y;i++)f[w++]=R;else f.set(e.subarray(h,h+y),w),w+=y,h+=y}for(var M=o,x=0;x<M;x++){var T=0;l[c]=f[x+T],T+=o,l[c+1]=f[x+T],T+=o,l[c+2]=f[x+T],T+=o,l[c+3]=f[x+T],c+=4}v--}return l}(l.subarray(l.pos),y,D);if(-1!==R){var data,M,x;switch(this.type){case n.v:x=R.length/4;for(var T=new Float32Array(4*x),k=0;k<x;k++)d=T,m=4*k,f=void 0,v=void 0,f=(c=R)[(h=4*k)+3],v=Math.pow(2,f-128)/255,d[m+0]=c[h+0]*v,d[m+1]=c[h+1]*v,d[m+2]=c[h+2]*v,d[m+3]=1;data=T,M=n.v;break;case n.y:x=R.length/4;for(var E=new Uint16Array(4*x),S=0;S<x;S++)o(R,4*S,E,4*S);data=E,M=n.y;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:y,height:D,data:data,header:w.string,gamma:w.gamma,exposure:w.exposure,type:M}}}return null}},{key:"setDataType",value:function(e){return this.type=e,this}},{key:"load",value:function(e,t,o,l){return Object(m.a)(Object(w.a)(r.prototype),"load",this).call(this,e,(function(e,r){switch(e.type){case n.v:case n.y:e.encoding=n.J,e.minFilter=n.K,e.magFilter=n.K,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,r)}),o,l)}}]),r}(n.p),R=(r(506),r(497)),M=r(498),x=r(8),T={name:"HomeCloudNew",data:function(){return{isDragging:!1,mouse:null,raycaster:null,time:0,active:{backgroundColor:"linear-gradient(0deg, rgb(68 99 49) 0%, rgb(163 174 255) 100%)",gltfLoader:null,material:null,shape:null,textureLoader:null},material:null,meshList:[],touchTarget:null,startPosition:null,scene:null,camera:null,renderer:null,textloader:null,width:0,height:0,mao:null,clock:null,group:null,morphTargetInfluences:null,morphTargetDictionary:null,onPointerDownPointerX:null,onPointerDownPointerY:null,startX:null,startY:null,endX:null,endY:null,outsideModel:!0,timer:null,direction:null,strength:0,back_ground:"url("+this.$store.state.sourcRoot+"/image/index/text-bg.png)"}},watch:{},mounted:function(){this.$nextTick(this.init)},methods:{init:function(){var e=this;this.$refs.webglDom_home;this.width=390,this.height=1e3,this.scene=new n.Cb,this.textloader=new n.Mb,this.camera=new n.db(this.width/-2,this.width/2,this.height/2,this.height/-2,1,1e3),this.camera.position.set(300,300,300),this.add(this.camera),this.camera.lookAt(this.scene.position),this.group=new n.x,this.clock=new n.k,this.mouse=new n.Qb,this.raycaster=new n.zb,this.renderer=new n.Tb({antialias:!0});var t=this.$store.state.sourcRoot+"/caseimg/snorlax_rgb.hdr";(new D).load(t,(function(t){var r=new n.fb(e.renderer);console.log("texture",t),console.log("gen",r);var o=r.fromEquirectangular(t).texture;e.scene.environment=o,e.scene.background=o,t.dispose(),r.dispose()})),this.touchTarget=new n.T(new n.hb(2e3,2e3),new n.U({opacity:0,transparent:!0,depthWrite:!1})),this.renderer.outputEncoding=n.Ub,this.renderer.toneMapping=n.a,this.renderer.toneMappingExposure=1,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=n.eb,this.renderer.setClearColor(new n.l("#ffffff"),0),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.setSize(this.width,this.height),document.getElementById("webglDom_home").appendChild(this.renderer.domElement),document.getElementById("webglDom_home").addEventListener("touchstart",this.onMouseDown,!1),document.getElementById("webglDom_home").addEventListener("touchmove",this.onMouseMove,!1),document.getElementById("webglDom_home").addEventListener("touchend",this.onMouseUp,!1),this.loadModel(),this.render()},inner_onMouseDown:function(e){this.material.uniforms.uDragStart.value.copy(e),this.material.uniforms.uDragTarget.value.copy(e),this.material.uniforms.uDragRelease.value=!1},inner_onMouseMove:function(e){this.material.uniforms.uDragTarget.value.copy(e)},inner_onMouseUp:function(time){this.material.uniforms.uDragReleaseTime.value=time,this.material.uniforms.uDragRelease.value=!0},onMouseDown:function(e){var t=window.innerWidth,r=window.innerHeight,n=(t-390)/2;this.mouse.x=(e.touches[0].pageX-n)/t*2-1,this.mouse.y=-(e.touches[0].pageY-70)/r*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);var o=this.raycaster.intersectObjects(this.meshList,!0);if(o.length){this.isDragging=!0;var l=o[0].point;this.inner_onMouseDown(l)}},onMouseMove:function(e){var t=window.innerWidth,r=window.innerHeight,n=(t-390)/2;if(this.mouse.x=(e.touches[0].pageX-n)/t*2-1,this.mouse.y=-(e.touches[0].pageY-70)/r*2+1,this.isDragging){this.raycaster.setFromCamera(this.mouse,this.camera);var o=this.raycaster.intersectObject(this.touchTarget);if(o.length){var l=o[0].point;this.inner_onMouseMove(l)}}},onMouseUp:function(){this.isDragging&&(this.isDragging=!1,this.inner_onMouseUp(this.time))},loadModel:function(){var e=this,t=this,r=(new l.a).setTranscoderPath("/js/libs/basis/").detectSupport(this.renderer),h=(new o.a).setCrossOrigin("anonymous").setKTX2Loader(r).setMeshoptDecoder(c.a),d=this.$store.state.sourcRoot+"/caseimg/snorlax_210.glb";h.load(d,(function(r){console.log("gltf",r),t.mao=r.scene.children[0],console.log("that.mao",t.mao),t.mao.position.set(0,0,0),t.mao.scale.set(2.8,2.8,2.8);var l=new n.Mb;l.textureEncoding=n.Ub;var c=e.$store.state.sourcRoot+"/caseimg/snorlax_texture.png",map=l.load(c);map.flipY=!1;var h=new n.Db({vertexShader:M.default,fragmentShader:R.default,uniforms:{uTime:{value:0},uDragStart:{value:new n.Rb},uDragTarget:{value:new n.Rb},uDragReleaseTime:{value:0},uDragRelease:{value:1},uReleaseDecay:{value:10},uReleaseFrequency:{value:55},uMap:{value:map}},transparent:!0});t.material=h;var d=t.mao;d.material=t.material,t.active={backgroundColor:"linear-gradient(0deg, rgb(68 99 49) 0%, rgb(163 174 255) 100%)",gltfLoader:new o.a,material:t.material,shape:d,textureLoader:new n.Mb},t.meshList.push(t.active.shape),t.add(t.active.shape)}),(function(e){var r=Math.floor(e.loaded/e.total*100);t.$emit("getrate",r)}))},addLight:function(){var e=new n.r(16777215,.2);e.position.set(0,1e3,1e3),e.castShadow=!0,this.add(e)},add:function(e){this.scene.add(e)},update:function(time){this.material.uniforms.uTime.value=time},render:function(){this.time+=.01633,this.material&&this.update(this.time),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.render)}}},k=function(){Object(x.b)((function(e,t){return{"55c83c20":e.back_ground}}))},E=T.setup;T.setup=E?function(e,t){return k(),E(e,t)}:k;var S=T,_=(r(583),r(30)),component=Object(_.a)(S,(function(){var e=this._self._c;return e("div",{staticClass:"home-cloud-box",attrs:{id:"home-cloud-box"}},[e("div",{ref:"webglDom_home",attrs:{id:"webglDom_home"}})])}),[],!1,null,null,null);t.default=component.exports}}]);