(window.webpackJsonp=window.webpackJsonp||[]).push([[19,28,29],{475:function(e,t,n){"use strict";n.r(t);t.default="\n\nuniform sampler2D uMap;\n\nvarying vec2 vUv;\nvarying float vDiff;\n\nvoid main() {\n\tgl_FragColor = texture2D(uMap, vUv);\n}"},476:function(e,t,n){"use strict";n.r(t);t.default="\n\nuniform float uTime;\nuniform vec3 uDragStart;\nuniform vec3 uDragTarget;\nuniform float uReleaseDecay;\nuniform float uReleaseFrequency;\nuniform float uDragReleaseTime;\nuniform float uDragRelease;\n\nvarying vec2 vUv;\nvarying float vDiff;\n\n\nvoid main() {\n    float startToTarget = distance(uDragTarget, uDragStart);\n    float distanceToStart = distance(position, uDragStart);\n    float influence = distanceToStart / (0.2 + 0.4 * startToTarget);\n    float distortion = exp(pow(clamp(influence, 0.,1.), 3.2) * -6.);\n\n    if (uDragRelease > 0.) {\n        float timeSinceRelease = uTime - uDragReleaseTime;\n        distortion *= exp(-uReleaseDecay * timeSinceRelease * max(distortion, 1.) / ( 6.));\n        distortion *= cos(timeSinceRelease * uReleaseFrequency / ( 2.28));\n    }\n\n    vec3 stretch = (uDragTarget - uDragStart) * distortion;\n    stretch += (uDragStart - position) * distortion * 0.72;\n\n    vec3 pos = position;\n    pos += stretch;\n    pos.z += abs(distortion) * 0.2;\n\n    vec4 viewPosition = modelViewMatrix * vec4(pos, 1.);\n\n    gl_Position = projectionMatrix * viewPosition;\n\n    vUv = uv;\n    vDiff = length(pos - position) * uDragRelease;\n}"},484:function(e,t,n){var content=n(502);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(53).default)("78bded0c",content,!0,{sourceMap:!1})},501:function(e,t,n){"use strict";n(484)},502:function(e,t,n){var o=n(52)(!1);o.push([e.i,".home-cloud-box{width:100%;height:280PX;position:relative;z-index:10;background:var(--0303bb95);background-repeat:no-repeat;background-position:center center;background-size:110% auto}.home-cloud-box #webglDom_home{width:100%;height:1000PX;margin-top:-356PX;position:fixed;z-index:1000;z-index:10;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%)}",""]),e.exports=o},536:function(e,t,n){"use strict";n.r(t);n(42),n(153);var o,r,l,d=n(2),h=n(188),c=n(487),m=n(483),f=n(475),v=n(476),w=n(8),D={name:"HomeCloudNew",data:function(){return{isDragging:!1,mouse:null,raycaster:null,time:0,active:{backgroundColor:"linear-gradient(0deg, rgb(68 99 49) 0%, rgb(163 174 255) 100%)",gltfLoader:null,material:null,shape:null,textureLoader:null},material:null,meshList:[],touchTarget:null,startPosition:null,textloader:null,width:0,height:0,mao:null,clock:null,group:null,morphTargetInfluences:null,morphTargetDictionary:null,onPointerDownPointerX:null,onPointerDownPointerY:null,startX:null,startY:null,endX:null,endY:null,outsideModel:!0,timer:null,direction:null,strength:0,back_ground:"url("+this.$store.state.sourcRoot+"/image/index/text-bg.png)"}},watch:{},mounted:function(){this.$nextTick(this.init)},methods:{init:function(){this.$refs.webglDom_home;this.width=window.innerWidth,this.height=1e3,o=new d.Ab,this.textloader=new d.Kb,(r=new d.bb(this.width/-2,this.width/2,this.height/2,this.height/-2,1,1e3)).position.set(400,200,400),this.add(r),r.lookAt(o.position),this.group=new d.v,this.clock=new d.k,this.mouse=new d.Ob,this.raycaster=new d.xb,this.addLight(),l=new d.Rb({antialias:!0}),this.touchTarget=new d.R(new d.fb(1e3,2e3),new d.S({opacity:0,transparent:!0,depthWrite:!1})),l.physicallyCorrectLights=!0,l.outputEncoding=d.Sb,l.toneMapping=d.a,l.toneMappingExposure=1.2,l.shadowMap.enabled=!0,l.shadowMap.type=d.cb,l.shadowMapEnabled=!0,l.setClearColor(new d.l("#ffffff"),0),l.setPixelRatio(Math.min(window.devicePixelRatio,2)),l.setSize(this.width,this.height),document.getElementById("webglDom_home").appendChild(l.domElement),document.getElementById("webglDom_home").addEventListener("touchstart",this.onMouseDown,!1),document.getElementById("webglDom_home").addEventListener("touchmove",this.onMouseMove,!1),document.getElementById("webglDom_home").addEventListener("touchend",this.onMouseUp,!1),this.loadModel(),this.render()},inner_onMouseDown:function(e){this.material.uniforms.uDragStart.value.copy(e),this.material.uniforms.uDragTarget.value.copy(e),this.material.uniforms.uDragRelease.value=!1},inner_onMouseMove:function(e){this.material.uniforms.uDragTarget.value.copy(e)},inner_onMouseUp:function(time){this.material.uniforms.uDragReleaseTime.value=time,this.material.uniforms.uDragRelease.value=!0},onMouseDown:function(e){console.log("event",e);var t=window.innerWidth,n=window.innerHeight;this.mouse.x=(e.touches[0].pageX-0)/t*2-1,this.mouse.y=-(e.touches[0].pageY-0)/n*2+1,this.raycaster.setFromCamera(this.mouse,r);var o=this.raycaster.intersectObjects(this.meshList,!0);if(console.log("intersect",o),o.length){this.isDragging=!0;var l=o[0].point;this.inner_onMouseDown(l)}},onMouseMove:function(e){var t=window.innerWidth,n=window.innerHeight;this.mouse.x=(e.touches[0].pageX-0)/t*2-1,this.mouse.y=-(e.touches[0].pageY-0)/n*2+1,this.raycaster.setFromCamera(this.mouse,r);var o=this.raycaster.intersectObject(this.touchTarget);if(console.log("intersect",o),o.length){var l=o[0].point;this.inner_onMouseMove(l)}},onMouseUp:function(){this.isDragging&&(this.isDragging=!1,this.inner_onMouseUp(this.time))},loadModel:function(){var e=this,t=this,n=(new c.a).setTranscoderPath("/js/libs/basis/").detectSupport(l),o=(new h.a).setCrossOrigin("anonymous").setKTX2Loader(n).setMeshoptDecoder(m.a),r=this.$store.state.sourcRoot+"/caseimg/snorlax_222.glb";o.load(r,(function(n){console.log("gltf",n),t.mao=n.scene.children[0],console.log("that.mao",t.mao),t.mao.position.set(0,0,0),t.mao.scale.set(2.6,2.6,2.6);var o=new d.Kb;o.textureEncoding=d.Sb;e.$store.state.sourcRoot;var r=e.$store.state.sourcRoot+"/caseimg/sk-uv-new.png",l=(location.href.split("?v=")[1],r),map=o.load(l);map.flipY=!1;var c=new d.Bb({vertexShader:v.default,fragmentShader:f.default,uniforms:{uTime:{value:0},uDragStart:{value:new d.Pb},uDragTarget:{value:new d.Pb},uDragReleaseTime:{value:0},uDragRelease:{value:1},uReleaseDecay:{value:10},uReleaseFrequency:{value:55},uMap:{value:map}},transparent:!0});t.material=c;var m=t.mao;m.material=t.material,t.active={backgroundColor:"linear-gradient(0deg, rgb(68 99 49) 0%, rgb(163 174 255) 100%)",gltfLoader:new h.a,material:t.material,shape:m,textureLoader:new d.Kb},t.meshList.push(t.active.shape),t.add(t.active.shape)}),(function(e){var n=Math.floor(e.loaded/e.total*100);t.$emit("getrate",n)}))},addLight:function(){var e=1e3,t=new d.b(16777215,1);this.add(t);var n=new d.p(16777215,1);n.position.set(0,e,e),this.add(n);var o=new d.p(16777215,1);o.position.set(-1e3,e,e),this.add(o);var r=new d.p(16777215,1);r.position.set(e,e,e),this.add(r);var l=new d.p(16777215,1);l.position.set(0,e,-1e3),this.add(l);var h=new d.p(16777215,1);h.position.set(0,-1e3,-1e3),this.add(h)},add:function(e){o.add(e)},update:function(time){this.material.uniforms.uTime.value=time},render:function(){this.time+=.01633,this.material&&this.update(this.time),l.render(o,r),requestAnimationFrame(this.render)}}},M=function(){Object(w.b)((function(e,t){return{"0303bb95":e.back_ground}}))},x=D.setup;D.setup=x?function(e,t){return M(),x(e,t)}:M;var y=D,T=(n(501),n(30)),component=Object(T.a)(y,(function(){var e=this._self._c;return e("div",{staticClass:"home-cloud-box",attrs:{id:"home-cloud-box"}},[e("div",{ref:"webglDom_home",attrs:{id:"webglDom_home"}})])}),[],!1,null,null,null);t.default=component.exports}}]);