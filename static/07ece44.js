(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{500:function(e,t,n){var content=n(510);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(53).default)("1b6fb1fe",content,!0,{sourceMap:!1})},509:function(e,t,n){"use strict";n(500)},510:function(e,t,n){var o=n(52)(!1);o.push([e.i,".webglDom[data-v-2255772b]{width:100%;height:100%;position:relative;z-index:1}",""]),e.exports=o},542:function(e,t,n){"use strict";n.r(t);n(46),n(26),n(54);var o=n(2),r=n(227),h=n(214),c=n(188),l={name:"OilContent",props:["glburl"],data:function(){return{object:null,scene:null,camera:null,renderer:null,textloader:null,controls:null,group:null,width:0,height:0,center:null,activeIndex:0,onPointerDownPointerX:null,onPointerDownPointerY:null,logopath:{"云栖盲盒":"apsara.2020","伸爪":"vans","天猫live":"tmall.live","天猫国际全球好物课代表":"tmall.global","天生艺术":"utalent","淘宝回忆":"taobao.memory",ADIC:"ali.adic",HEY_DESIGN:"heydesign",OMOJI:"oppoo.moji","十大商品6":"taobaotop","发发奇":"farfetch","发发奇会员":"vipfarfetch","天猫主题店2":"tmall2","天猫主题店第一期":"tmall","宝藏新品牌":"tmallnew","超级视窗":"taobao.superwindow","飞猪2":"fliggy","麦当劳":"mcdonald.nft","东京奥运会":"tokyo2020","乐高":"lego","云栖大会2021":"ali.apsara","城市缝隙迷行贴纸":"city","观夏":"mixplace","造物节":"taobao2022","长江":"changjiang","不完全命理指南":"jinyu","节日不打烊2020":"nostop","节日不打烊2021":"nostop2021","菇得来福":"goodlife"}}},watch:{},mounted:function(){this.$nextTick(this.init)},methods:{init:function(){var e=this.$refs.webglDom;this.width=e.offsetWidth,this.height=e.offsetHeight,this.scene=new o.Cb,this.textloader=new o.Mb,this.group=new o.x,this.camera=new o.gb(45,this.width/this.height,.01,1e4),this.camera.position.set(0,0,0),console.log("this.camera",this.camera),this.camera.lookAt(0,0,0),this.scene.add(this.camera),this.loadModel(),e.addEventListener("mousedown",this.onDocumentMouseDown,!1),document.addEventListener("touchstart",this.onDocumentTouchDown,!1),document.addEventListener("touchend",this.onDocumentTouchUp,!1),document.addEventListener("touchmove",this.onDocumentTouchMove,!1)},onDocumentTouchDown:function(e){this.startX=e.touches[0].pageX,this.startY=e.touches[0].pageY,this.onPointerDownPointerX=e.touches[0].pageX,this.onPointerDownPointerY=e.touches[0].pageY},onDocumentTouchMove:function(e){this.onPointerDownPointerX=e.touches[0].pageX,this.onPointerDownPointerY=e.touches[0].pageY,this.endX=e.touches[0].pageX,this.endY=e.touches[0].pageY},onDocumentTouchUp:function(e){},onDocumentMouseDown:function(e){var t=this.getIntersects(e);if(console.log("intersects",t),0!==t.length&&"Mesh"===t[0].object.type){var n=t[0].object;console.log("selectObject",n.name);var path=this.logopath[n.name];if(!path)return;this.$router.push({path:"/caselist/"+path})}else console.log("未选中 Mesh!")},getIntersects:function(e,t){t||e.preventDefault();var n=new o.zb,r=new o.Qb;return t?e.clientX?(r.x=e.clientX/window.innerWidth*2-1,r.y=-e.clientY/window.innerHeight*2+1):(r.x=this.onPointerDownPointerX/window.innerWidth*2-1,r.y=-this.onPointerDownPointerY/window.innerHeight*2+1):(r.x=e.clientX/window.innerWidth*2-1,r.y=-e.clientY/window.innerHeight*2+1),n.setFromCamera(r,this.camera),n.intersectObjects(this.group.children,!0)},changeCamera:function(e){var object=e.scene||e.scenes[0],t=(new o.f).setFromObject(object),n=t.getSize(new o.Rb(0,0,0)).length(),c=t.getCenter(new o.Rb(0,0,0));object.position.x+=object.position.x-c.x,object.position.y+=object.position.y-c.y,object.position.z+=object.position.z-c.z,object.scale.set(.96,.96,.96),object.translateY(.1),this.camera.near=n/100,this.camera.far=100*n,this.camera.position.copy(c),this.camera.position.x+=n/2,this.camera.position.y+=n/5,this.camera.position.z+=n/2,this.camera.lookAt(c),this.camera.up=new o.Rb(0,1,0),this.camera.updateProjectionMatrix(),this.object=object,this.group.add(this.object),this.scene.add(this.group),this.printGraph(object),this.renderer=new o.Tb({antialias:!0}),this.renderer.outputEncoding=o.Ub,this.renderer.toneMapping=o.a,this.renderer.toneMappingExposure=1.2,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=o.eb,this.renderer.setClearColor(new o.l("#000000"),0),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.setSize(this.width,this.height),this.$refs.webglDom.appendChild(this.renderer.domElement);var l=new h.a,d=new o.fb(this.renderer);this.scene.environment=d.fromScene(l).texture;var m=new r.a(this.camera,this.renderer.domElement);m.enablePan=!1,m.enableZoom=!1,m.minPolarAngle=Math.PI/3,m.maxPolarAngle=Math.PI/2,this.controls=m,this.render()},loadModel:function(){var e=this;(new c.a).load(this.glburl,(function(t){console.log("gltf",t),e.changeCamera(t)}),(function(t){var n=Math.floor(t.loaded/t.total*100);e.$emit("judgerate",n)}))},printGraph:function(e){var t=this;console.log("node.children.length",e.children.length),console.group(" <"+e.type+"> "+e.name),e.children.forEach((function(e){return t.printGraph(e)})),console.groupEnd()},addLight:function(){var e=1e3,t=new o.b(16777215,.5);this.add(t);var n=new o.r(16777215,.5);n.position.set(0,e,e),this.add(n);var r=new o.r(16777215,.5);r.position.set(-1e3,e,e),this.add(r);var h=new o.r(16777215,.5);h.position.set(e,e,e),this.add(h);var c=new o.r(16777215,.5);c.position.set(0,e,-1e3),this.add(c);var l=new o.r(16777215,.5);l.position.set(0,-1e3,-1e3),this.add(l)},add:function(e){this.scene.add(e)},render:function(){this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.render)}}},d=(n(509),n(30)),component=Object(d.a)(l,(function(){return(0,this._self._c)("div",{ref:"webglDom",staticClass:"webglDom"})}),[],!1,null,"2255772b",null);t.default=component.exports}}]);