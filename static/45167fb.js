(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{386:function(e,t,n){var content=n(424);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(67).default)("72cdab47",content,!0,{sourceMap:!1})},423:function(e,t,n){"use strict";n(386)},424:function(e,t,n){var o=n(66)(!1);o.push([e.i,".home-cloud-box{width:100%;height:280PX;position:relative;z-index:10;background:var(--226ad06c);background-repeat:no-repeat;background-position:center center;background-size:110% auto}.home-cloud-box #webglDom_home{width:390PX;height:320PX;margin-top:-30PX;position:absolute;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%)}",""]),e.exports=o},523:function(e,t,n){"use strict";n.r(t);n(30),n(68),n(512),n(395);var o=n(337),r=n(422),h=n(338),c=n(339),d=n(526),l=n(514),m=n(1),w={name:"HomeCloud",data:function(){return{scene:null,camera:null,renderer:null,textloader:null,controls:null,width:0,height:0,mao:null,clock:null,group:null,morphTargetInfluences:null,morphTargetDictionary:null,onPointerDownPointerX:null,onPointerDownPointerY:null,startX:null,startY:null,endX:null,endY:null,outsideModel:!0,timer:null,direction:null,strength:0,back_ground:"url("+this.$store.state.sourcRoot+"/image/index/text-bg.png)"}},watch:{},mounted:function(){this.$nextTick(this.init)},methods:{init:function(){var e=this.$refs.webglDom_home;this.width=e.offsetWidth,this.height=e.offsetHeight,this.scene=new o.zb,this.textloader=new o.Ib,this.camera=new o.bb(this.width/-2,this.width/2,this.height/2,this.height/-2,1,1e3),this.camera.position.set(600,100,100),this.add(this.camera),this.camera.lookAt(this.scene.position),this.group=new o.v,this.clock=new o.k,this.renderer=new o.Pb({antialias:!0}),this.renderer.outputEncoding=o.Qb,this.renderer.toneMapping=o.a,this.renderer.toneMappingExposure=1,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=o.cb,this.renderer.setClearColor(new o.l("#ffffff"),.1),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.setSize(this.width,this.height),document.getElementById("webglDom_home").appendChild(this.renderer.domElement);var t=new h.a,n=new o.db(this.renderer);this.scene.environment=n.fromScene(t).texture,document.getElementById("webglDom_home").addEventListener("mousedown",this.onDocumentMouseDown,!1),document.getElementById("webglDom_home").addEventListener("touchstart",this.onDocumentTouchDown,!1),document.getElementById("webglDom_home").addEventListener("touchmove",this.onDocumentTouchMove,!1),document.getElementById("webglDom_home").addEventListener("touchend",this.onDocumentTouchUp,!1);var c=new r.a(this.camera,this.renderer.domElement);c.noRotate=!0,c.noZoom=!0,c.noPan=!0,c.dynamicDampingFactor=.1,this.controls=c,this.loadModel(),this.render()},onDocumentTouchDown:function(e){this.startX=e.touches[0].pageX,this.startY=e.touches[0].pageY,this.onPointerDownPointerX=e.touches[0].pageX,this.onPointerDownPointerY=e.touches[0].pageY;var t=this.getIntersects(e);console.log("intersects",t),t&&t.length>0&&"身体"==t[0].object.name?this.outsideModel=!1:this.outsideModel=!0},getIntersects:function(e){e.preventDefault();var t=new o.wb,n=new o.Mb;return e.clientX?(n.x=e.clientX/window.innerWidth*2-1,n.y=-e.clientY/window.innerHeight*2+1):(n.x=this.onPointerDownPointerX/window.innerWidth*2-1,n.y=-this.onPointerDownPointerY/window.innerHeight*2+1),t.setFromCamera(n,this.camera),t.intersectObjects(this.mao.children,!0)},onDocumentTouchMove:function(e){this.onPointerDownPointerX=e.touches[0].pageX,this.onPointerDownPointerY=e.touches[0].pageY,this.endX=e.touches[0].pageX,this.endY=e.touches[0].pageY,this.mainLogic(this.startX,this.startY,this.endX,this.endY)},onDocumentTouchUp:function(e){var t=this,n=this.morphTargetInfluences,o=this.morphTargetDictionary[this.direction],r=this.strength;n[o]=r,this.morphTargetInfluences=n;var h=r/10;console.log("this.strength",this.strength),this.timer=setInterval((function(){r=(r=Number(r-h).toFixed(2))<0?r=0:r,console.log("strength",r),n[o]=r,t.morphTargetInfluences=n,0==r&&clearInterval(t.timer)}),10)},onDocumentMouseDown:function(e){},loadModel:function(){var e=this,t=(new d.a).setTranscoderPath("/js/libs/basis/").detectSupport(this.renderer);(new c.a).setCrossOrigin("anonymous").setKTX2Loader(t).setMeshoptDecoder(l.a).load("./caseimg/home_1.glb",(function(t){e.mao=t.scene.children[0],e.mao.position.set(0,0,0),e.mao.scale.set(2.8,2.8,2.8),e.mao.rotation.set(0,1.4,0),e.group.add(e.mao),e.add(e.group);var head=e.mao.getObjectByName("身体");e.morphTargetInfluences=head.morphTargetInfluences,e.morphTargetDictionary=head.morphTargetDictionary}))},mainLogic:function(e,t,n,o){var r=this.width/2,h=this.height/2,c=e-r,d=t-h,l=n-r,m=o-h,w=c>l,f=c<l,x=d>m,D=d<m,v=r,M=Math.sqrt(Math.abs(e-n)*Math.abs(e-n)+Math.abs(t-o)*Math.abs(t-o)),P=Number(M/v).toFixed(2);Number(Math.abs(t-o)/v).toFixed(2),Number(Math.abs(e-n)/v).toFixed(2);console.log("strength",P),this.outsideModel?w&&x?this.extrusion(P,"youxia-li"):w&&D?this.extrusion(P,"youshang-li"):f&&x?this.extrusion(P,"zuoxia-li"):f&&D?this.extrusion(P,"zuoshang-li"):c==l?(P=Number(Math.abs(d-m)/v).toFixed(2),x&&this.extrusion(P,"xia-li"),D&&this.extrusion(P,"shang-li")):d==m&&(P=Number(Math.abs(c-l)/v).toFixed(2),w&&this.extrusion(P,"you-li"),f&&this.extrusion(P,"zuo-li")):this.outsideModel||(w&&x?this.extrusion(P,"zuoshang"):w&&D?this.extrusion(P,"zuoxia"):f&&x?this.extrusion(P,"youshang"):f&&D?this.extrusion(P,"youxia"):c==l?(P=Number(Math.abs(d-m)/v).toFixed(2),x&&this.extrusion(P,"shang"),D&&this.extrusion(P,"xia")):d==m&&(P=Number(Math.abs(c-l)/v).toFixed(2),w&&this.extrusion(P,"zuo"),f&&this.extrusion(P,"you")))},extrusion:function(e,t){console.log("strength",e);var n=this.morphTargetInfluences;n[this.morphTargetDictionary[t]]=e,this.morphTargetInfluences=n,this.direction=t,this.strength=e},addLight:function(){var e=new o.p(16777215,.2);e.position.set(0,1e3,1e3),e.castShadow=!0,this.add(e)},add:function(e){this.scene.add(e)},render:function(){this.controls.update(),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.render)}}},f=function(){Object(m.b)((function(e,t){return{"226ad06c":e.back_ground}}))},x=w.setup;w.setup=x?function(e,t){return f(),x(e,t)}:f;var D=w,v=(n(423),n(34)),component=Object(v.a)(D,(function(){var e=this._self._c;return e("div",{staticClass:"home-cloud-box",attrs:{id:"home-cloud-box"}},[e("div",{ref:"webglDom_home",attrs:{id:"webglDom_home"}})])}),[],!1,null,null,null);t.default=component.exports}}]);